<!doctype html>

<!--

    Welcome to the light side of the source, young padawan.

    One step closer to learn something interesting you are...

                               ____                  
                            _.' :  `._               
                        .-.'`.  ;   .'`.-.           
               __      / : ___\ ;  /___ ; \      __  
             ,'_ ""=-.:__;".-.";: :".-.":__;.-="" _`,
             :' `.t""=-.. '<@.`;_  ',@:` ..-=""j.' `;
                  `:-.._J '-.-'L__ `-.-' L_..-;'     
                    "-.__ ;  .-"  "-.  : __.-"       
                        L ' /.======.\ ' J           
                         "-.   "__"   .-"            
                        __.l"-:_JL_;-";.__           
                     .-j/'.;  ;""""  / .'\"-.        
                   .' /:`. "-.:     .-" .';  `.      
                .-"  / ;  "-. "-..-" .-"  :    "-.   
             .+"-.  : :      "-.__.-"      ;-._   \  
             ; \  `.; ;                    : : "+. ; 
             :  ;   ; ;                    : ;  : \: 
             ;  :   ; :                    ;:   ;  : 
            : \  ;  :  ;                  : ;  /  :: 
            ;  ; :   ; :                  ;   :   ;: 
            :  :  ;  :  ;                : :  ;  : ; 
            ;\    :   ; :                ; ;     ; ; 
            : `."-;   :  ;              :  ;    /  ; 
             ;    -:   ; :              ;  : .-"   : 
             :\     \  :  ;            : \.-"      : 
              ;`.    \  ; :            ;.'_..-=  / ; 
              :  "-.  "-:  ;          :/."      .'  :
               \         \ :          ;/  __        :
                \       .-`.\        /t-""  ":-+.   :
                 `.  .-"    `l    __/ /`. :  ; ; \  ;
                   \   .-" .-"-.-"  .' .'j \  /   ;/ 
                    \ / .-"   /.     .'.' ;_:'    ;  
                     :-""-.`./-.'     /    `.___.'   
                           \ `t  ._  /               
                            "-.t-._:'                

-->

<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Having a robust test suite for your web app</title>
    
    <meta name="description" content="Having a robust test suite for your web app" />
    <meta name="author" content="Tanay PrabhuDesai" />

    <link href="//fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />

    <link href="css/impress-demo.css" rel="stylesheet" />
    <link href="css/dracula.css" rel="stylesheet" />
    
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>
<body class="impress-not-supported">
<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>
<img id="logo" src="./logo.png">
<div id="impress">
    <div id="separator0" class="step" data-x="0" data-y="0" data-z="4000">
    </div>

    <!-- Cube 1 -->
    <div id="" class="step slide" data-x="0" data-y="0" data-z="0">
        <div class="centered-content head-slide-content">
            <h3 class="heading">Having a robust test suite</h3>
            <div class="subtitle-content">
                <p>Tanay PrabhuDesai</p>
                <p>Software Engineer</p>
                <p>Equal Experts</p>
            </div>
        </div>
        
        <div class="notes">
            <ol>
                <li>Hi, I'm Tanay</li>
                <li>Working at Equal Experts for around 2 months</li>
                <li>At the start of my career exposed to TDD</li>
                <li>How many of you do TDD daily?</li>
                <li>How many of you have different roles as QA and Dev?</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="0" data-y="0" data-rotate-y="180" data-z="-2000">
        <div class="centered-content">
            <h3 class="heading heading-top-aligned">Disclaimer</h3>
            <div class="subtitle-content">
                <p>This talk is purely based on my previous experiences. The content has high chances of getting really opinionated and/or biased. Always remember this quote, "Just because you can, does not mean that you should" - Unknown</p>
            </div>
        </div>
        <div class="notes">
            <ol>
                <li>The standard disclaimer goes as usual</li>
                <li>The thoughts that I place forth in this talk are my learnings</li>
                <li>I don't want myself to be held accountable for any diasaster that can be caused because of misinformation</li>
                <li>Just because you can do something does not mean that you should do that thing</li>
            </ol>
        </div>
    </div>
    <div id="separator1" class="step" data-x="2000" data-y="0" data-z="2000" data-rotate-y="0"></div>

    <!-- Cube 2 -->
    <div id="" class="step slide" data-x="3000" data-y="0" data-z="0">
        <h3 class="heading heading-top-aligned centered-content">Typical application architecture</h3>
        <div class="centered-content image-top-padding">
            <img src="res/app_architecture.svg" alt="app_architecture" />
        </div>
        <div class="notes">
            <ol>
                <li>Database layer</li>
                <li>The Repo layer talks to the database layer</li>
                <li>The business logic layer talks to the repo layer</li>
                <li>The exposed "API" layer talks to the business logic layer</li>
                <li>The UI layer talks to the API layer</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="4000" data-y="0" data-rotate-y="90" data-z="-1000">
        <h4 class="heading heading-top-aligned centered-content">Tests at each point of the app architecture</h4>
        <div class="centered-content">
            <img src="res/app_architecture_with_individual_tests.svg" alt="testing at each layer of the application" />
        </div>
        <div class="notes">
            <ol>
                <li>Testing the UI layer</li>
                <li>Testing the API layer</li>
                <li>Testing the Repo layer</li>
                <li>Testing the business logic as and when needed</li>
                <li>Only test what is needed and avoid redundancy as much as possible</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="3000" data-y="0" data-rotate-y="180" data-z="-2000">
        <h4 class="heading heading-top-aligned centered-content">Different types of tests across the layers</h4>
        <div class="half-split-section">
            <span class="half-section padded-container">
                <h5>Typical Terminology in testing</h5>
                <ol>
                    <li>Unit Tests</li>
                    <li>Functional Tests</li>
                    <li>Acceptence Tests</li>
                    <li>Integration Tests</li>
                    <li>Automation Tests</li>
                </ol>
            </span>
            <span class="half-section padded-container">
                <h5>Alternative names for tests</h5>
                <ol>
                    <li>Repo tests</li>
                    <li>Service tests</li>
                    <li>Controller tests</li>
                    <li>E2E API tests</li>
                    <li>E2E UI tests</li>
                </ol>
            </span>
        </div>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="2000" data-y="0" data-z="-1000" data-rotate-y="270">
        <h4 class="heading heading-top-aligned centered-content">Start writing tests from top and go down one step at a time</h4>
        <div class="centered-content image-top-padding">
            <img src="res/test_through_layers.svg" alt="tests from top to bottom" />
        </div>
        <div class="notes">
            <ol>
                <li>I personally do not like writing UI tests from top to bottom</li>
                <li>But I do love going from top to bottom for tests that are done from the API level</li>
                <li>So start from top, i.e. the API layer and write a test for it</li>
                <li>Then go down one step at a time down the ladder just focusing on that one step</li>
                <li>Continue down this path till you reach the bottom most layer</li>
                <li>Hey! You're just done</li>
            </ol>
        </div>
    </div>
    <div id="separator2" class="step" data-x="5000" data-y="0" data-z="2000" data-rotate-y="0"></div>

    <!-- Cube 3 -->
    <div id="" class="step slide" data-x="6000" data-y="0" data-z="0">
        <h3 class="heading heading-top-aligned centered-content">Types of test doubles</h3>
        <ol class="padded-container" style="padding-top: 80px; padding-left: 200px;">
            <li>Dummies</li>
            <li>Mocks</li>
            <li>Stubs</li>
            <li>Spys</li>
            <li>Fakes</li>
        </ol>
        <div class="notes">
            <ol>
                <li>Gerard Meszaros terminology from the book: xUnit Test Patterns</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="7000" data-y="0" data-rotate-y="90" data-z="-1000">
        <h4 class="heading heading-top-aligned centered-content">Mocks</h4>
        <div style="padding-top: 80px;">
            <pre><code class="python">
def test_allows_get_name():
    user = User('Carl')
    expect(user).get_name
    user.get_name()
            </code></pre>
        </div>
        <div class="notes">
            <ol>
                <li>Point 1</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="6000" data-y="0" data-rotate-y="180" data-z="-2000">
        <h4 class="heading heading-top-aligned centered-content">Stubs</h4>
        <div style="padding-top: 80px;">
            <pre><code class="python">
def test_allows_get_name():
    user = User('Carl')
    allow(user).get_name.and_returns('Carl')
    assert user.get_name() is 'Carl'
            </code></pre>
        </div>
        <div class="notes">
            <ol>
                <li>Point 1</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="5000" data-y="0" data-z="-1000" data-rotate-y="270">
        <h4 class="heading heading-top-aligned centered-content">Spys</h4>
        <div style="padding-top: 80px;">
            <pre><code class="python">
def test_allows_get_name():
    user = User('Carl')
    allow(user).get_name.can_call_once()
    assert user.get_name() is 'Carl'
            </code></pre>
        </div>
        <div class="notes">
            <ol>
                <li>Point 1</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="6000" data-y="500" data-z="-1000" data-rotate-x="90">
        <h4 class="heading heading-top-aligned centered-content">Fakes</h4>
        <div style="padding-top: 80px;">
            <pre><code class="python">
def test_email_is_sent():
    mailer = Mailer()
    mailer.send(email='someone@somewhere.com', subject='Hello this is a email')
    assert len(mailer.inbox) == 1
            </code></pre>
        </div>
        <div class="notes">
            <ol>
                <li>Point 1</li>
            </ol>
        </div>
    </div>
    <div id="separator3" class="step" data-x="8000" data-y="0" data-z="2000" data-rotate-y="0"></div>

    <!-- Cube 4 -->
    <div id="" class="step slide" data-x="9000" data-y="0" data-z="0">
        <h4 class="heading heading-top-aligned centered-content">A test like this?</h4>
        <div style="padding-top: 80px;">
            <pre><code class="python">
def test_that_create_user_endpoint_returns_201_status():
    endpoint = HttpEndpoint()
    allow(endpoint).handle_response.and_return(201)
    app.set_endpoint(endpoint)
    response = app.post_json(create_user_endpoint, {'username': 'someone', 
                                                    'password': 'password'})
    assert response.status == 201
            </code></pre>
        </div>
        <div class="notes">
            <ol>
                <li>Are these test doubles good?</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="10000" data-y="0" data-rotate-y="90" data-z="-1000">
        <h4 class="heading heading-top-aligned centered-content">Covering most of the things with unit tests</h4>
        <div class="centered-content">
            <img src="res/test_pyramid.svg" alt="test pyramid"/>
        </div>
        <div class="notes">
            <ol>
                <li>Definition of a Unit test</li>
                <li>How many people follow the test pyramid?</li>
                <li>Is it correct to unit test everything?</li>
                <li>Do we need 100% unit tests?</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="9000" data-y="0" data-rotate-y="180" data-z="-2000">
        <h4 class="heading heading-top-aligned centered-content">Tests accross architecture (using doubles)</h4>
        <div class="centered-content">
            <img src="res/app_architecture_with_individual_tests.svg" alt="architecture with individual tests"/>
        </div>
        <div class="notes">
            <ol>
                <li>Show the architecture diagram here with tests</li>
                <li>The layered architecture is actually very tightly coupled</li>
                <li>We split it into different layers for tests</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="8000" data-y="0" data-z="-1000" data-rotate-y="270">
        <h4 class="heading heading-top-aligned centered-content">Or a test like this?</h4>
        <div style="padding-top: 80px;">
            <pre><code class="python">
def test_that_create_user_endpoint_returns_201_status():
    response = app.post_json('/create_user', {'username': 'someone', 
                                              'password': 'password'})
    assert response.status == 201
            </code></pre>
        </div>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="9000" data-y="500" data-z="-1000" data-rotate-x="90">
        <h4 class="heading heading-top-aligned centered-content">Separating everything in the Jigsaw puzzle</h4>
        <div class="centered-content" style="padding-top: 50px;">
            <img src="res/disintegrated_modules.svg" alt="modules split" />
        </div>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="separator4" class="step" data-x="11000" data-y="0" data-z="2000" data-rotate-y="0"></div>

    <!-- Cube 5 -->
    <div id="" class="step slide" data-x="12000" data-y="0" data-z="0">
        <h3 class="heading heading-top-aligned centered-content">Reasons for overuse of unit tests</h3>
        <ol style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>Unit tests are fast, while others are slow</li>
            <li>Unit tests test smaller modules by breaking tasks into smaller chunks</li>
            <li>It helps in debugging if something small is failing</li>
            <li>Reduces the cost by making coding faster and reducing bugs</li>
            <li>Helpful to do TDD using Unit Tests</li>
            <li>Makes it easy to change and refactor code</li>
        </ol>
        <div class="notes">
            <ol>
                <li></li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="13000" data-y="0" data-rotate-y="90" data-z="-1000">
        <h4 class="heading heading-top-aligned centered-content">Mock the database layer?</h4>
        <div>
            <div style="text-align: center;">
                <ol style="padding-top: 50px; padding-left: 50px; line-height: 40px; list-style: none;">
                    <li>Or mock any layer for that matter</li>
                    <li>You're not using the real object</li>
                    <li>You're testing something that does not exist</li>
                </ol>
            </div>
            <div class="centered-content" style="padding-top: 80px">
                <img src="./res//test_with_single_layer_mocked.svg" />
            </div>
        </div>
        <div class="notes">
            <ol>
                <li>Show the pyramid here</li>
                <li>Definition of a Unit test</li>
                <li>How many people follow the test pyramid?</li>
                <li>Is it correct to unit test everything?</li>
                <li>Do we need 100% unit tests?</li>
                <li>Doubled surroundings in the tests</li>
                <li>Everything that is tightly coupled is ripped out</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="12000" data-y="0" data-rotate-y="180" data-z="-2000">
        <h4 class="heading heading-top-aligned centered-content">Slow DI framework?</h4>
        <ul style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>The dependency injection framework that you use is very slow</li>
            <li>In Python Flask you do not need DI</li>
            <li>Try to find the slow parts in your tests</li>
            <li>Try to fix slow parts of your code</li>
            <li>For Eg: The encryption part of login</li>
        </ul>
        <div class="notes">
            <ol>
                <li>Show the architecture diagram here with tests</li>
                <li>The layered architecture is actually very tightly coupled</li>
                <li>We split it into different layers for tests</li>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="11000" data-y="0" data-z="-1000" data-rotate-y="270">
        <h4 class="heading heading-top-aligned centered-content">True 100% testing</h4>
        <div class="centered-content" style="padding-top: 60px">
            <img src="res/app_architecture_with_whole_tests.svg" alt="modules split" />
        </div>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="12000" data-y="500" data-z="-1000" data-rotate-x="90">
        <h4 class="heading heading-top-aligned centered-content">Keeping all the pieces together</h4>
        <div class="centered-content" style="padding-top: 60px">
            <img src="res/integrated_modules.svg" alt="modules split" />
        </div>
        <div class="notes">
            <ol>

            </ol>
        </div>
    </div>
    <div id="separator5" class="step" data-x="14000" data-y="0" data-z="2000" data-rotate-y="0"></div>

    <!-- Cube 6 -->
    <div id="" class="step slide" data-x="15000" data-y="0" data-z="0">
        <h3 class="heading heading-top-aligned centered-content" style="padding-top: 260px;">Tests that fail once in a bluemoon (literally)</h3>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="16000" data-y="0" data-rotate-y="90" data-z="-1000">
        <h4 class="heading heading-top-aligned centered-content">Public holiday schedule</h4>
        <ul style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>Tests that fail on every Friday</li>
            <li>Test for for a schedule manager like calender</li>
            <li>The feature was to book an appointment</li>
            <li>The tests checked if it is possible to book the appointment the next day or not</li>
        </ul>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="15000" data-y="0" data-rotate-y="180" data-z="-2000">
        <h4 class="heading heading-top-aligned centered-content">Selection of any two out of three recommendations</h4>
        <ul style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>Tests that fail randomly</li>
            <li>Online store that show any 5 out of the possible recommendations</li>
            <li>Test was written with 6 possible recommendations</li>
            <li>The first 5 of them were asserted if they exist</li>
        </ul>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="14000" data-y="0" data-z="-1000" data-rotate-y="270">
        <h4 class="heading heading-top-aligned centered-content">Runs on Jenkins but fails on local</h4>
        <ul style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>The Jenkins environment runs on Ubuntu Server</li>
            <li>The local environment runs on a Mac</li>
            <li>Hard to figure out what exactly is wrong because it is failing for everyone</li>
        </ul>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="15000" data-y="500" data-z="-1000" data-rotate-x="90">
        <h4 class="heading heading-top-aligned centered-content">Test an external email service</h4>
        <ul style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>You have an external email service</li>
            <li>You have to test if the email is sent or not</li>
            <li>Simple solution is to use a Fake</li>
        </ul>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="separator6" class="step" data-x="17000" data-y="0" data-z="2000" data-rotate-y="0"></div>

    <!-- Cube 7 -->
    <div id="" class="step slide" data-x="18000" data-y="0" data-z="0">
        <h3 class="heading heading-top-aligned centered-content">Normal test pyramid</h3>
        <div class="centered-content" style="padding-top: 60px;">
            <img src="res/test_pyramid.svg" alt="test pyramid" />
        </div>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="19000" data-y="0" data-rotate-y="90" data-z="-1000">
        <h3 class="heading heading-top-aligned centered-content">Test Cylinder</h3>
        <div class="centered-content" style="padding-top: 60px;">
            <img src="res/test_cylinder.svg" alt="test cylinder" />
        </div>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="18000" data-y="0" data-rotate-y="180" data-z="-2000">
        <h3 class="heading heading-top-aligned centered-content">Test Ice-Cream Cone</h3>
        <div class="centered-content" style="padding-top: 60px;">
            <img src="res/test_ice_cream_cone.svg" alt="test ice cream cone" />
        </div>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="17000" data-y="0" data-z="-1000" data-rotate-y="270">
        <h4 class="heading heading-top-aligned centered-content">Code Coverage</h4>
        <ul style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>Pushing the coverage to 100%</li>
            <li>CI forces coverage to go up</li>
            <li>And it goes red when the coverage goes down</li>
            <li>Coverage should always be a metric to measure what's not covered</li>
        </ul>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="separator7" class="step" data-x="20000" data-y="0" data-z="2000" data-rotate-y="0"></div>

    <div id="" class="step slide" data-x="21000" data-y="0" data-z="0">
        <h3 class="heading heading-top-aligned centered-content">Summary</h3>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>
    <div id="" class="step slide" data-x="21000" data-y="0" data-rotate-y="180" data-z="-2000">
        <h3 class="heading heading-top-aligned centered-content">Thank you</h3>
        <ul style="padding-top: 70px; padding-left: 90px; line-height: 70px;">
            <li>tanayseven.com</li>
            <li>twitter.com/tanayseven</li>
            <li>github.com/tanayseven</li>
            <li>linkedin.com/in/tanay-prabhudesai</li>
        </ul>
        <div class="notes">
            <ol>
            </ol>
        </div>
    </div>

<div class="hint">
    <p>Use a spacebar or arrow keys to navigate. <br/>
       Press 'P' to launch speaker console.</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Swipe left or right to navigate</p>";
}
</script>
<script src="js/impress.js"></script>
<script src="js/impressConsole.js"></script>
<script src="js/highlight.js"></script>
<script>impress().init();</script>
<script>impressConsole().init()</script>

</body>
</html>
